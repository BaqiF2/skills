---
name: task
description: 执行功能调整task.md的下一个任务，并生成状态跟踪文件
argument-hint: [file-path] [num|group:N]
---

## 参数说明

- `file-path`: task.md 文件路径（可选，默认当前目录）
- `num`: 执行单个任务（如：`5`）
- `group:N`: 执行任务组（如：`group:1`）
- 无参数：自动执行下一个未完成任务

## 核心流程

### 单任务模式
1. **读取理解**：明确任务要求和预期结果
2. **执行任务**：完成任务描述中的工作
3. **验证成功**：确认符合要求
4. **标记完成**：`[ ]` → `[x]`

⚠️ **重要**：验证成功后才可标记完成，失败必须重新分析

### 任务组模式

**识别与执行：**
1. 查找所有 `_TaskGroup: N_` 标记的任务
2. 按编号顺序执行：读取 → 执行 → 验证 → 标记
3. 任一任务失败立即停止，报告失败原因
4. 不跳过任何任务（包括可选的 [重构]）

**TDD 验证：**
- [验证] Red 任务必须确认测试失败
- [验证] Green 任务必须确认测试通过
- 记录测试结果到状态报告

**状态报告：**
生成 `task-group-{N}-status.md`，包含：
- 任务组概览（Scenario 名称、任务数量）
- 每个任务的执行结果和输出
- Red/Green 阶段测试信息
- 文件变更列表
- 完成状态（成功/失败）

## 状态跟踪文件

**文件位置**：与 task.md 相同目录

**文件命名：**
- 单任务：`task-{xxx}-status.md`（xxx 为任务编号）
- 任务组：`task-group-{N}-status.md`（N 为任务组编号）
